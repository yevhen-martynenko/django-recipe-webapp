{% extends "../base.html" %}
{% load asset_tags %}


{% block title %}{{ title }}{% endblock title %}
{% block page_styles %}
<link rel="stylesheet" href="{% asset_tags 'password_reset_confirm.css' %}">
{% endblock page_styles %}


{% block content %}
<div class="container-centered">
  <main class="password-reset" role="main">
    <header class="password-reset__header">
      <span class="password-reset__badge">Account Recovery</span>
      <h1 class="password-reset__title page-title">Reset Your Password</h1>
      <p class="password-reset__subtitle page-subtitle">Enter and confirm your new password below</p>
    </header>

    <!-- Messages -->
    <div id="error_message" class="inline-message inline-message--error" role="alert" aria-live="assertive">
      <strong>Reset link expired.</strong>
      Please request a new password reset.
    </div>

    <!-- Form -->
    <form class="password-reset__form" id="password_reset_form" novalidate>
      <!-- New Password -->
      <div class="form form--spaced">
        <label for="new_password" class="form__label">New Password</label>
        <div class="form__field-container">
          <input
            type="password"
            id="new_password"
            name="new_password"
            class="password-reset__input form__field"
            autocomplete="new-password"
            aria-describedby="password_strength password_error"
            required
          />
          <button
            type="button"
            class="form__icon"
            aria-label="Toggle password visibility"
            data-toggle="new_password"
            aria-expanded="false"
          >
            <span class="form__icon--eye-closed"></span>
          </button>
        </div>

        <div class="password-strength" id="password_strength">
          <div class="password-strength__bar">
            <div class="password-strength__fill password-strength__fill--strong"></div>
          </div>
          <div class="password-strength__text password-strength__text--strong"></div>
        </div>

        <div id="new_password_error" class="inline-message__error" role="alert"></div>
        <div id="new_password_success" class="inline-message__success"></div>
      </div>

      <!-- Confirm New Password -->
      <div class="form form--spaced">
        <label for="confirm_new_password" class="form__label">Confirm New Password</label>
        <div class="form__field-container">
          <input
            type="password"
            id="confirm_new_password"
            name="confirm_new_password"
            class="password-reset__input form__field"
            autocomplete="new-password"
            aria-describedby="confirm_new_password_error"
            required
          />
          <button
            type="button"
            class="form__icon"
            aria-label="Toggle password visibility"
            data-toggle="confirm_new_password"
            aria-expanded="false"
          >
            <span class="form__icon--eye-closed"></span>
          </button>
        </div>
        <div id="confirm_new_password_error" class="inline-message__error" role="alert"></div>
        <div id="confirm_new_password_success" class="inline-message__success"></div>
      </div>

      <button type="submit" class="btn btn--primary">Reset Password</button>
    </form>

    <footer class="password-reset__footer">
      <p>
        <a href="/auth" class="password-reset__back-link">‚Üê Back to Login</a>
      </p>
    </footer>
  </main>
</div>
{% endblock content %}


{% block page_scripts %}
<script defer src="{% asset_tags 'password_reset_confirm.js' %}"></script>
{% endblock page_scripts %}
